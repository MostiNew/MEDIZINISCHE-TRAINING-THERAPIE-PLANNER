
<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MTT-Planer ‚Äì Therapieplan</title>

<style>
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:#f5f7fa;margin:0;padding:12px;color:#1f2937}
h1,h2{margin:0 0 8px}
.container{max-width:100%;margin:auto}
.card{background:#fff;border-radius:10px;padding:12px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.08)}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:8px}
select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #cbd5e1;font-size:.8rem}
textarea{resize:vertical}
.actions{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
button{flex:1;padding:10px;border-radius:10px;border:none;background:#0284c7;color:#fff;font-size:.85rem}
button.secondary{background:#334155}
.admin{border-left:4px solid #ca8a04}
.prescribe{border-left:4px solid #0284c7}
.execute{border-left:4px solid #16a34a}
.evaluate{border-left:4px solid #ea580c}
.table-wrap{overflow-x:auto}
table{min-width:900px;width:100%;border-collapse:collapse;font-size:.75rem}
th{background:#0284c7;color:#fff;padding:6px;white-space:nowrap}
td{border-bottom:1px solid #e2e8f0;padding:6px;text-align:center}
tr:hover td{background:#e0f2fe}
footer{text-align:center;font-size:.7rem;color:#6b7280;margin-top:16px}
@media print{.actions{display:none}}
</style>
</head>

<body>
<div class="container">

<h1>MTT-Planer</h1>
<div style="font-size:.7rem;color:#475569;margin-bottom:10px">
Lokal ¬∑ Mobilf√§hig ¬∑ Keine Cloud ¬∑ ¬© Ali Moustafa
</div>

<div class="actions">
  <button onclick="window.print()">üñ®Ô∏è Drucken</button>
  <button class="secondary" onclick="exportCSV()">CSV</button>
  <button class="secondary" onclick="exportJSON()">JSON</button>
  <button class="secondary" onclick="exportFHIR()">FHIR</button>
</div>

<!-- ADMIN -->
<div class="card admin">
<h2>A. Patient & Organisation</h2>
<div class="grid admin-fields">
  <select><option>Patienten-ID</option></select>
  <select><option>Name, Vorname</option></select>
  <select><option>Geburtsdatum</option></select>
  <select><option>Fallnummer / KOS-ID</option></select>
  <select><option>Station</option></select>
  <select><option>Raum / MTT</option></select>
  <select><option>Arzt</option></select>
  <select><option>Therapeut</option></select>
  <select><option>Datum</option></select>
</div>
</div>

<!-- PRESCRIBE -->
<div class="card prescribe">
<h2>B. Therapieplanung</h2>
<div class="grid prescribe-fields">
  <select><option>Diagnose / Befund</option></select>
  <select><option>Therapieziele (ICF)</option></select>
  <select><option>K√∂rperregion</option></select>
  <select><option>Akut</option><option>Aufbau</option><option>Funktionell</option><option>Return-to-Activity</option></select>
  <select><option>ROM min</option></select>
  <select><option>ROM max</option></select>
  <select><option>Schmerz (NRS)</option></select>
  <select><option>submaximal</option><option>progressiv</option><option>isometrisch</option><option>exzentrisch</option></select>
  <select><option>Tempo / UPM</option></select>
  <select><option>Pause (s)</option></select>
</div>
</div>

<!-- EXERCISES -->
<div class="card execute">
<h2>C. Ger√§te & √úbungen</h2>
<div class="table-wrap">
<table id="exerciseTable">
<tr>
<th>‚úî</th><th>Nr</th><th>Art</th><th>Ger√§t</th>
<th>Belastung</th><th>Watt</th><th>kg</th><th>S√§tze</th>
<th>Wdh</th><th>UPM</th><th>ICF Ziel</th><th>Kommentar</th>
</tr>
</table>
</div>
</div>

<!-- EVALUATION -->
<div class="card evaluate">
<h2>D. Evaluation</h2>
<div class="grid">
  <select><option>ROM erreicht</option><option>teilweise</option><option>nein</option></select>
  <select><option>Schmerz (NRS)</option></select>
  <select><option>Belastung gut</option><option>reduziert</option><option>nicht toleriert</option></select>
  <select><option>Kommentar</option></select>
</div>
</div>

<footer>MTT-Planer ¬∑ Mobile ¬∑ GitHub Pages</footer>
</div>

<script>
// ====== GER√ÑTE & ICF & PRESETS ======
const geraete=[
"Laufband","Fahrradergometer","Arm-Ergometer","Ellipsentrainer","Stepper",
"Ruderergometer","Sitzergometer","Oberk√∂rper-Ergometer","Seilzug Doppelturm",
"Latzug","Ruderzug","Butterfly","Chest Press","Shoulder Press",
"Beinpresse 45¬∞","Beinstrecker","Beinbeuger","Abduktor","Adduktor",
"Gluteusmaschine","Wadenpresse","H√ºftstrecker","H√ºftbeuger",
"Rumpfstrecker","Rumpfbeuger","Rotationstrainer","Lateralflexion Rumpf",
"Wirbels√§ulenmobilisation","Nackenextension","Nackenflexion",
"Schulterabduktion","Schulteradduktion","Schulterrotation innen",
"Schulterrotation au√üen","Bizepsmaschine","Trizepsmaschine",
"Unterarmtrainer","Handkrafttrainer","Greiftrainer",
"Balance Board","Wackelbrett","Propriozeptionsplatte",
"Thera-Band Station","Sprossenwand","Matten√ºbungen",
"Kabelzug funktionell","Zirkelstation Beine","Zirkelstation Arme",
"Zirkelstation Rumpf","Zirkelstation Ganzk√∂rper",
"Kniebeugenmaschine","Ausfallschritt-Trainer","Core-Trainer",
"Schlingentrainer","Reaktionswand","Gangtrainer","Treppentrainer",
"Stehtrainer","Rollstuhltrainer","Arm-Bein-Kombitrainer"
];

const icfMap={Ausdauer:"b455 ‚Äì Belastbarkeit",Kraft:"b730 ‚Äì Muskelkraft",Stabilisation:"b760 ‚Äì Kontrolle",Mobilit√§t:"b710 ‚Äì Beweglichkeit"};

const belastung={leicht:{kg:10,watt:50,wdh:15,satz:2,upm:50},mittel:{kg:20,watt:80,wdh:12,satz:3,upm:60},schwer:{kg:30,watt:120,wdh:10,satz:4,upm:70}};

function options(arr){return arr.map(v=>`<option>${v}</option>`).join("");}

const table=document.getElementById("exerciseTable");

for(let i=1;i<=70;i++){
  const r=table.insertRow();
  r.innerHTML=`
  <td><input type="checkbox"></td>
  <td>${i}</td>
  <td><select onchange="setICF(this)"><option></option><option>Ausdauer</option><option>Kraft</option><option>Mobilisation</option><option>Stabilisation</option></select></td>
  <td><select>${options(geraete)}</select></td>
  <td><select onchange="setLoad(this)"><option></option><option>leicht</option><option>mittel</option><option>schwer</option></select></td>
  <td><input></td>
  <td><input></td>
  <td><input></td>
  <td><input></td>
  <td><input></td>
  <td><input></td>
  <td><input></td>
  `;
}

function setLoad(sel){
  const r=sel.closest("tr");
  const p=belastung[sel.value]; if(!p) return;
  r.cells[5].querySelector("input").value=p.watt;
  r.cells[6].querySelector("input").value=p.kg;
  r.cells[7].querySelector("input").value=p.satz;
  r.cells[8].querySelector("input").value=p.wdh;
  r.cells[9].querySelector("input").value=p.upm;
}

function setICF(sel){sel.closest("tr").cells[10].querySelector("input").value=icfMap[sel.value]||"";}

// ====== EXPORT FUNCTIONS ======
function exportCSV(){
  let csv="";[...table.rows].forEach(r=>{const v=[...r.querySelectorAll("input,select")].map(e=>e.value);if(v.join("").trim())csv+=v.join(";")+"\n";});
  download(csv,"MTT_KOS.csv","text/csv");
}
function exportJSON(){
  let out=[];[...table.rows].forEach(r=>{const f=[...r.querySelectorAll("input,select")].map(e=>e.value);if(f.join("").trim())out.push({nr:f[1],art:f[2],geraet:f[3],belastung:f[4],watt:f[5],kg:f[6],saetze:f[7],wdh:f[8],upm:f[9],icf:f[10],kommentar:f[11]});});
  download(JSON.stringify(out,null,2),"MTT_KOS.json","application/json");
}
function exportFHIR(){alert("FHIR export wird sp√§ter implementiert");}
function download(data,name,type){const a=document.createElement("a");a.href=URL.createObjectURL(new Blob([data],{type}));a.download=name;a.click();}
</script>

</body>
</html>
